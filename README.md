Чеповецкий Александр ИТ-7 

Вариант 1

Используя структуру стека, вычислить выражение, содержащее две операции:
поиск минимума (обозначается m(<число1>,<число2>)) и поиск максимума
(обозначается М(<число1>,<число2>)). Операции могут быть вложенными,
например, M(15, m(16,8)) (в данном выражении ищем минимум из 16 и 8, а
потом ищем максимум от результата m(16,8) и 15, ответ 15). В качестве
аргументов могут использоваться только целые положительные числа.
Строка, вводимая пользователем, корректна и не содержит пробелов.

## Структура данных

### Стек на основе связного списка

- Выбран **стек** как основная структура данных, так как вычисление выражений с вложенными функциями естественным образом укладывается в модель стека (постфиксная обработка).
- Вместо стандартных списков Python реализован собственный стек на основе связного списка.
- Узлы списка (`Node`) содержат значение и ссылку на следующий элемент.

Преимущества выбранной структуры:
- Динамическое управление памятью — нет ограничений на размер;
- Быстрое добавление и удаление элементов из головы списка (O(1));
- Простота реализации без сдвигов данных.

---

## Алгоритм работы

1. Пользователь вводит выражение.
2. Выполняется **валидация выражения**:
   - Проверка допустимых символов;
   - Баланс скобок;
   - Количество аргументов у функций `m()` и `M()`.
3. Если выражение корректно, выполняется вычисление:
   - Обход выражения справа налево;
   - Числа помещаются в стек;
   - При встрече функции `m` или `M` извлекаются два аргумента из стека, выполняется операция `min` или `max`, результат возвращается обратно в стек.
4. В конце в стеке остаётся итоговый результат.

---

## Обработка исключений

Обработка ошибок реализована в двух частях программы:

1. **На этапе вычислений (`evaluate`)**:
   - Проверяется наличие двух аргументов в стеке перед применением функций;
   - При отсутствии аргументов выбрасывается исключение `ValueError`.

2. **В пользовательском интерфейсе (`main`)**:
   - Основной блок вычислений обёрнут в `try-except`;
   - При возникновении ошибок вычисления выводится сообщение об ошибке и пользователю предлагается ввести выражение заново.

Такой подход позволяет:
- отделить логику проверки от логики вычисления;
- давать пользователю понятные сообщения об ошибках.

---

## Классы и ООП

### 1️⃣ `Node`  
- Представляет узел связного списка.
- Инкапсулирует значение элемента и ссылку на следующий узел.

### 2️⃣ `Stack`  
- Реализация стека на основе связного списка.
- Методы: `push`, `pop`, `clear`, `__len__`.

### 3️⃣ `ExpressionEvaluator`  
- Инкапсулирует логику валидации и вычисления выражений.
- Агрегирует стек как внутреннюю структуру хранения чисел.

---

## Принципы ООП

- **Инкапсуляция:** каждый класс скрывает детали своей реализации.
- **Композиция:** `ExpressionEvaluator` использует стек как часть своей структуры.
- **Полиморфизм и наследование:** в данной реализации не используются напрямую, но архитектура легко расширяема (например, можно создать абстрактный базовый класс для операций, чтобы добавить новые функции).

---
